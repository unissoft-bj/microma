!function(e,t,l,a,i){var n=0,r=function(a,i){var r=t.browser,s=[];for(var c in r)if("version"==c)s.push("version="+r[c]);else s.push("browser="+c);var h=e.setInterval(function(){if(e.neteaseTracker){e.clearInterval(h);l.virualViewStat("http://caipiao.163.com/jsError.html?err="+i+"&"+s.join("&")+"&page="+encodeURIComponent(document.URL),"脚本com组件错误")}},200);if(0==n)e.alert('脚本遇到错误："'+a+'"\n错误信息已经搜集，我们会尽快解决，或者联系客服解决：020-83568090');else e.alert("该页面遇到多处脚本错误，请联系我们的客服（020-83568090），我们会安排技术人员直接为您服务。");n++};var s=t.isSupportTouch?"tap":"click";var c=a.regBaseCom2Lib("COMS.PT.BetArea","onChange onBallClick onBallChange onRandom onClear",{config:{wrap:"",redBallSelector:".redBallBox li a",redBallActive:"got",redBallHightL:"active",blueBallSelector:".blueBallBox li a",blueBallActive:"got",blueBallHightL:"active",animate:true},init:function(e){var l=a.getType(e),i=this;switch(l){case"string":case"element":this.config=t.extend({},this.config,{wrap:e});break;case"object":if(e.length&&e[0]&&e[0].nodeName){this.config=t.extend({},this.config,{wrap:e});break}this.config=t.extend({},this.config,e||{});break;default:return}var n=t(this.config.wrap);if(!n[0]){r("投注区容器设置错误，初始化失败！","area001");return}n.delegate(this.config.redBallSelector,s,function(e){return i.ballClick(this,e,"red")}).delegate(this.config.blueBallSelector,s,function(e){return i.ballClick(this,e,"blue")});this.cache={redBalls:n.find(this.config.redBallSelector),blueBalls:n.find(this.config.blueBallSelector),redBallLast:null,blueBallLast:null}},ballClick:function(e,l,a){var i=t(e),n=this.config[a+"BallActive"],r=this.config[a+"BallHightL"],s=this,c,h=function(e,l){var i=[],c;t.each(l,function(e,l){i[e]=+t(l).text()});if(false===s.callEvent("onBallClick",a,e,i))c=false;if(false===s.callEvent("onBallChange",a,e,i))c=false;if(false==c)return false;t.each(l,function(l,a){t(a)[e?"addClass":"removeClass"](n+" "+r)});s.callEvent("onChange","click")};c=h(i.hasClass(n)?0:1,i);if(false!==c)this.cache[a+"BallLast"]=i},get:function(e,l){if(!e||!{red:1,blue:1}[e])return[this.get("red",l),this.get("blue",l)];var a=this.cache[e+"Balls"],i=this.config[e+"BallActive"],n=[];a.each(function(e,a){if(t(a).hasClass(i)){var r=t(a).text();n.push(l?r:+r)}});return n},clear:function(e,t){if(!e||!{red:1,blue:1}[e]){this.clear("red",t);this.clear("blue",t);return this}var l=this.cache[e+"Balls"],a=this.config[e+"BallActive"],i=this.config[e+"BallHightL"],n=this.get(e),r;if(!n.length)return this;if(!t)if(false===this.callEvent("onClear",e))r=false;if(false===this.callEvent("onBallChange",e,0,n))r=false;if(false==r)return this;this.__stopAniTimer(e);l.removeClass(a+" "+i);this.callEvent("onChange","clear");return this},push:function(e,t,l){return this.__change(e,1,t,l)},pull:function(e,t){return this.__change(e,0,t)},__change:function(l,a,i,n){if(!l||!{red:1,blue:1}[l]||!i||!i.length)return this;var r=t.map(i,function(e){return+e}),s=this.config[l+"BallActive"],c=this.config[l+"BallHightL"],h=this,o=[],f=[],u=0==a;this.cache[l+"Balls"].each(function(e,l){var a=t(l),i=+a.text();if(t.inArray(i,r)>=0&&a.hasClass(s)===u){f.push(l);o.push(i)}});if(!o.length)return this;if(false===this.callEvent("onBallChange",l,a,o))return this;this.__stopAniTimer(l);t.each(f,function(e,l){if(a)t(l).addClass(!h.config.animate?s+" "+c:s);else t(l).removeClass(s+" "+c)});if(a&&h.config.animate){var g=f.length,v=0;this["__"+l+"hltimer"]=e.setInterval(function(){if(v<g)t(f[v]).addClass(c);else h.__stopAniTimer(l);v++},50)}this.callEvent("onChange",n||(a?"push":"pull"));return this},__stopAniTimer:function(l){var a="__"+l+"hltimer",n=this,r=n.config[l+"BallActive"],s=n.config[l+"BallHightL"];if(n[a]){e.clearInterval(n[a]);n[a]=i;n.cache[l+"Balls"].each(function(e,l){var a=t(l);a[a.hasClass(r)?"addClass":"removeClass"](s)})}},random:function(e,l){if(!e||!{red:1,blue:1}[e]||!l)return this;var i=[],n=[],r=[],s,c,h=this.config[e+"BallActive"];this.cache[e+"Balls"].each(function(e,l){var a=t(l),s=+t(l).text();if(a.hasClass(h))n.push(s);else r.push(s);i[e]=s});if(false===this.callEvent("onRandom",e,c=Math.min(i.length,+l)))return this;if(n.length<c)s=a.random(r,c-n.length).concat(n);else s=a.random(i,c);return this.set(e,s,"random")},set:function(e,t,l){if("array"==a.getType(e)&&2==e.length&&"array"==a.getType(e[0])&&"array"==a.getType(e[1]))return this.set("red",e[0]).set("blue",e[1]);if(!e||!{red:1,blue:1}[e]||!t)return this;return this.clear(e,true).push(e,t,l)},toggle:function(e,l){if(!e||!{red:1,blue:1}[e]||!l||!l.length)return this;var a=t.map(l,function(e){return+e}),i=[],n=[],r=this.config[e+"BallActive"];this.cache[e+"Balls"].each(function(e,l){var s=t(l),c=+s.text();if(t.inArray(c,a)>=0)s.hasClass(r)?i.push(c):n.push(c)});return!n.length?this.pull(e,i):this.push(e,n)}})}(window,Zepto,Core,Game);